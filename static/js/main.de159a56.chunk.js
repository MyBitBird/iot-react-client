(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{174:function(e,t,n){e.exports={container:"Service__container___2L07Z"}},177:function(e,t,n){e.exports={container:"Report__container___2l3Uz"}},235:function(e,t,n){e.exports=n(428)},33:function(e,t,n){e.exports={container:"Auth__container___15m-0",loginPanel:"Auth__loginPanel___1k2oI",loginHeader:"Auth__loginHeader___2hYXk",loginText:"Auth__loginText___2YZ80",domainText:"Auth__domainText___koV58",buttonsGrid:"Auth__buttonsGrid___2XNpa",errorPanel:"Auth__errorPanel___2ZABu"}},35:function(e,t,n){e.exports={container:"ServiceInfo__container___25NZM",notSelectedService:"ServiceInfo__notSelectedService___2KjQJ",selectedService:"ServiceInfo__selectedService___23UcK",title:"ServiceInfo__title___2bUF5",text:"ServiceInfo__text___1l8Ov",icon:"ServiceInfo__icon___1RUs9",link:"ServiceInfo__link___22Fej"}},409:function(e,t,n){},428:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(26),i=n.n(c),o=n(18),l=n(19),s=n(21),u=n(20),d=n(22),m=n(6),p=n(3),f=function(e){return a.a.createElement(p.r,Object.assign({style:{marginBottom:"5px"}},e))},E=function(e){return e.children},v=n(33),h=n.n(v),_=n(77),b=n.n(_),S=n(10),g=n(17),O=n.n(g),C=function(e){return localStorage.setItem("token",e),O.a.defaults.headers.common.authorization="Bearer ".concat(e),{type:"LOGIN",token:e}},y=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={isInRegisterMode:!1,errors:[]},n.onSubmit=function(e){e.preventDefault(),n.formValidation()},n.formValidation=function(){var e=[];n.state.isInRegisterMode&&(n.props.password!=n.props.rePassword&&e.push("Password & RePassword are not equal."),n.props.password.length<5&&e.push("Password must be longer than 5 characters.")),n.setState({errors:e},function(){return 0==e.length?n.actionHandler():null})},n.toggleRegisterModeHandler=function(){return n.setState(function(e){return{isInRegisterMode:!e.isInRegisterMode}})},n.actionHandler=function(){n.state.isInRegisterMode?n.props.onRegister(Object(m.a)({},n.props)):n.props.onLogin(Object(m.a)({},n.props))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t={backgroundImage:"url(".concat(b.a,")")},n=a.a.createElement(E,null,a.a.createElement(f,{required:!0,fullWidth:!0,type:"password",label:"Re-Password",name:"rePassword",onChange:function(t){return e.props.onFieldChanged(t)}}),a.a.createElement(f,{required:!0,fullWidth:!0,label:"Name",name:"name",onChange:function(t){return e.props.onFieldChanged(t)}}),a.a.createElement(f,{required:!0,fullWidth:!0,label:"Family",name:"family",onChange:function(t){return e.props.onFieldChanged(t)}}));return a.a.createElement("form",{onSubmit:function(t){return e.onSubmit(t)}},a.a.createElement(p.e,{container:!0,className:h.a.container},a.a.createElement(p.e,{xs:4,item:!0}),a.a.createElement(p.e,{xs:4,item:!0},a.a.createElement(p.i,{className:h.a.loginPanel},a.a.createElement(p.e,{container:!0},a.a.createElement(p.e,{xs:12,item:!0,style:t,className:h.a.loginHeader}),a.a.createElement(p.e,{xs:12,item:!0,className:h.a.loginText},a.a.createElement("h3",null,"Login")),a.a.createElement(p.e,{xs:12,item:!0,className:h.a.errorPanel},this.state.errors.map(function(e){return a.a.createElement("span",null,"* ",e,a.a.createElement("br",null))})),a.a.createElement(f,{required:!0,fullWidth:!0,label:"Username",name:"username",onChange:function(t){return e.props.onFieldChanged(t)}}),a.a.createElement(f,{required:!0,type:"password",name:"password",fullWidth:!0,label:"Password",onChange:function(t){return e.props.onFieldChanged(t)}}),this.state.isInRegisterMode?n:null,a.a.createElement(p.e,{container:!0},a.a.createElement(p.e,{xs:12,item:!0,className:h.a.buttonsGrid},a.a.createElement(p.b,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary"},this.state.isInRegisterMode?"Register":"Login")),a.a.createElement(p.e,{xs:12,item:!0,className:h.a.buttonsGrid},a.a.createElement(p.b,{onClick:this.toggleRegisterModeHandler,fullWidth:!0,color:"primary"},this.state.isInRegisterMode?"Login":"SignUp"))))),a.a.createElement("div",{className:h.a.domainText},"BitBird")),a.a.createElement(p.e,{xs:4,item:!0})))}}]),t}(r.Component),j=Object(S.b)(function(e){return Object(m.a)({},e.auth)},function(e){return{onLogin:function(t){return e(function(e){var t={username:e.username,password:e.password};return function(e){O.a.post("users/Authenticate",t).then(function(t){e(C(t.data.token))})}}(t))},onFieldChanged:function(t){return e((n=t.target.name,r=t.target.value,{type:"AUTH_FILED_CHANGE",filed:n,value:r}));var n,r},onRegister:function(t){return e(function(e){var t={username:e.username,password:e.password,name:e.name,family:e.family};return function(e){O.a.post("users/SignUp",t).then(function(t){e(C(t.token))})}}(t))}}})(y),I=function(e){return function(t){function n(){var e,t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=Object(s.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(a)))).state={isLoading:!1,error:null},t}return Object(d.a)(n,t),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.reqInterceptor=O.a.interceptors.request.use(function(t){return e.setState({isLoading:!0}),t},function(e){return e}),this.resInterceptor=O.a.interceptors.response.use(function(t){return e.setState({isLoading:!1}),t},function(t){var n=t.message;if(null!=t.response)switch(t.response.status){case 400:n="Bad Request: "+Object.entries(t.response.data).map(function(e){return e[1]}).map(function(e){return"".concat(e)});break;case 401:n="Incorrect Username or Password!";break;case 403:n="Access Denied!";break;case 404:n="Network Error";break;case 500:n="Oops! Server Error";break;case 502:n=t.response.data;break;default:n="Undefined Erro: "+t.response}return e.setState({isLoading:!1,error:n}),Promise.reject(t)})}},{key:"componentWillUnmount",value:function(){O.a.interceptors.request.eject(this.reqInterceptor),O.a.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){var t=this,n=a.a.createElement(E,null,a.a.createElement("span",null,this.state.error),this.state.isLoading?a.a.createElement(p.f,{style:{width:300},color:"secondary",variant:"query"}):null);return a.a.createElement(E,null,a.a.createElement(p.k,{autoHideDuration:3e3,onClose:function(){return t.setState({error:null})},anchorOrigin:{vertical:"top",horizontal:"center"},open:null!=this.state.error||this.state.isLoading,message:n}),a.a.createElement(e,this.props))}}]),n}(r.Component)},R=n(429),D=n(56),P=n.n(D),k=n(48),w=n.n(k),x=n(78),L=n.n(x),A=n(173),T=n.n(A),N=n(79),V=n.n(N),F=n(72),H=n.n(F),M=n(73),B=n.n(M),U=Object(S.b)(null,function(e){return{onLogout:function(){return e((localStorage.removeItem("token"),{type:"LOGOUT"}))}}})(function(e){return a.a.createElement(H.a,{position:"static"},a.a.createElement(B.a,null,a.a.createElement(p.e,{item:!0,xs:11},a.a.createElement(R.a,{to:"/services"},a.a.createElement(w.a,{className:P.a.selectedLinks,showLabel:!0,label:"Services",icon:a.a.createElement(L.a,null)})),a.a.createElement(R.a,{to:"/Devices"},a.a.createElement(w.a,{className:P.a.selectedLinks,showLabel:!0,label:"Devices",icon:a.a.createElement(V.a,null)})),a.a.createElement(R.a,{to:"/Reports"},a.a.createElement(w.a,{className:P.a.selectedLinks,showLabel:!0,label:"Reports",icon:a.a.createElement(T.a,null)}))),a.a.createElement(p.b,{color:"inherit",onClick:e.onLogout,className:P.a.rightLinks},"Logout"),a.a.createElement("img",{src:b.a,width:"80",height:"80"})))}),W=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.isAuthenticated?a.a.createElement(U,null):null;return a.a.createElement(p.e,{container:!0},e,a.a.createElement(p.e,{item:!0,xs:12},a.a.createElement("main",null,this.props.children)))}}]),t}(r.Component),q=Object(S.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(I(W)),G=(n(409),n(433)),Y=n(430),z=n(432),J=function(){return function(e){O.a.get("/Services").then(function(t){e({type:"SERVICE_LOAD_SERVICE",services:t.data})})}},Z=function(e){return function(t){return new Promise(function(n){O.a.get("/Services/"+e).then(function(e){t(K(e.data)),n(e.data)})})}},K=function(e){return{type:"SERVICE_LOAD_SERVICE_INFO",serviceInfo:e}},X=function(){return{type:"SERVICE_CLEAR_FORMS"}},Q=n(174),$=n.n(Q),ee=function(e){return a.a.createElement(p.i,{style:{padding:15,width:"80%",margin:"15px auto",textAlign:"center",fontSize:18,fontWeight:"bold",color:"#888888"}},null==e.children?"Nothing is defined!":e.children)},te=n(35),ne=n.n(te),re=Object(S.b)(function(e){return Object(m.a)({},e.service)},function(e){return{onSelectService:function(t){return e({type:"SERVICE_SELECT_SERVICE",id:t})}}})(function(e){return a.a.createElement(p.e,{xs:3,item:!0},a.a.createElement(p.i,{className:[ne.a.container,e.service.id===e.selectedId?ne.a.selectedService:ne.a.notSelectedService].join(" "),onClick:function(){return e.onSelectService(e.service.id)}},a.a.createElement(L.a,{fontSize:"large",className:ne.a.icon}),a.a.createElement(p.s,{className:ne.a.title,variant:"h5",component:"h3"},e.service.title),a.a.createElement(p.s,{className:ne.a.text,component:"p"},e.service.id),a.a.createElement("br",null),a.a.createElement(R.a,{className:ne.a.link,to:"/Details/".concat(e.service.id)},"More Details")))}),ae=function(e){return a.a.createElement(E,null,0==e.services.length?a.a.createElement(ee,null):e.services.map(function(e){return a.a.createElement(re,{service:e,key:e.id})}))},ce=n(176),ie=n.n(ce),oe=n(80),le=n.n(oe),se=n(175),ue=n.n(se),de=function(e){var t=null;switch(e.type){default:case"add":t=a.a.createElement(le.a,null);break;case"edit":t=a.a.createElement(ue.a,null);break;case"delete":t=a.a.createElement(ie.a,null)}return e.visible?a.a.createElement(p.b,Object.assign({style:{marginLeft:5},variant:"fab"},e),t):null},me=function(e){return a.a.createElement(p.e,{style:{position:"fixed",bottom:50,right:70},xs:12,item:!0},e.children)},pe=function(e){return a.a.createElement(p.h,{style:{width:"30%",height:"50%",margin:"auto",position:"absolute"},open:e.open},a.a.createElement(p.i,{style:{padding:15}},e.children))},fe=n(31),Ee=n(74),ve=n.n(Ee),he=n(75),_e=n.n(he),be=n(76),Se=n.n(be),ge=n(39),Oe=n.n(ge),Ce=n(85),ye=n.n(Ce),je=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={activeStep:0,completed:[]},n.getSteps=function(){return Object(fe.a)(n.props.steps)},n.getStepContent=function(e){return n.props.children[e]},n.totalSteps=function(){return n.props.steps.length},n.isLastStep=function(){return n.state.activeStep===n.totalSteps()-1},n.completedSteps=function(){return Object(fe.a)(n.state.completed).length},n.allStepsCompleted=function(){return n.completedSteps()===n.totalSteps()},n.handleNext=function(){var e;n.isLastStep()&&!n.allStepsCompleted()?e=n.getSteps().findIndex(function(e,t){return!(t in n.state.completed)}):e=n.state.activeStep+1;n.setState({activeStep:e})},n.handleBack=function(){n.setState(function(e){return{activeStep:e.activeStep-1}})},n.handleStep=function(e){return function(){n.setState({activeStep:e})}},n.handleComplete=function(){var e=n.state.completed;e[n.state.activeStep]=!0,n.setState({completed:e}),n.handleNext()},n.handleReset=function(){n.setState({activeStep:0,completed:{}})},n.onSubmit=function(e){e.preventDefault(),n.isLastStep()?n.props.onSave():n.handleComplete()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.getSteps(),n=this.state.activeStep;return a.a.createElement(E,null,a.a.createElement(ve.a,{nonLinear:!0,activeStep:n},t.map(function(t,n){return a.a.createElement(_e.a,{key:t},a.a.createElement(Se.a,{onClick:e.handleStep(n),completed:e.state.completed[n]},t))})),a.a.createElement("div",null,this.allStepsCompleted()?a.a.createElement(Oe.a,{onClick:this.handleReset},"Finish"):a.a.createElement("div",null,a.a.createElement("form",{onSubmit:function(t){return e.onSubmit(t)}},this.getStepContent(n),a.a.createElement("div",{className:ye.a.buttonsRow},a.a.createElement("div",{className:ye.a.navigationButtons},a.a.createElement(Oe.a,{color:"primary",onClick:this.props.onClose},"Close")),a.a.createElement("div",{className:ye.a.closeButton},a.a.createElement(Oe.a,{disabled:0===n,onClick:this.handleBack},"Back"),a.a.createElement(Oe.a,{variant:"contained",color:"primary",type:"submit"},this.isLastStep()?"Save":"Next")))))))}}]),t}(r.Component),Ie=n(27),Re=n(50),De=n.n(Re),Pe=Object(S.b)(function(e){return Object(m.a)({},e.service)},function(e){return{onAddProperty:function(){return e({type:"SERVICE_ADD_NEW_PROPERTIES"})},onRemoveProperty:function(t){return e(function(e){return{type:"SERVICE_DELETE_NEW_PROPERTIES",index:e}}(t))},onPropertyTitleChanged:function(t,n){return e(function(e,t){return{type:"SERVICE_PROPERTY_TITLE_CHANGED",index:e,value:t}}(t,n))},onPropertyCodeChanged:function(t,n){return e(function(e,t){return{type:"SERVICE_PROPERTY_CODE_CHANGED",index:e,value:t}}(t,n))}}})(function(e){return a.a.createElement(E,null,a.a.createElement("div",{className:De.a.container},a.a.createElement("div",{style:{marginBottom:20}},a.a.createElement("span",null,"You can define your service properties,title will show in web reports and code use in sending data.")),e.serviceProperties.map(function(t,n){var r;return a.a.createElement("div",{className:De.a.propertiesContainer,key:n},a.a.createElement(p.r,{onChange:function(t){return e.onPropertyTitleChanged(n,t.target.value)},className:De.a.textField,autoFocus:!0,value:t.title,required:!0,label:"Property Title"}),a.a.createElement(p.r,{onChange:function(t){return e.onPropertyCodeChanged(n,t.target.value)},autoFocus:!0,value:t.code,required:!0,label:"Property Code"}),a.a.createElement(p.b,(r={onClick:function(){return e.onRemoveProperty(n)},className:De.a.clearButton,mini:!0},Object(Ie.a)(r,"className",De.a.clearButton),Object(Ie.a)(r,"color","secondary"),Object(Ie.a)(r,"variant","outlined"),r),"X"))})),a.a.createElement(p.b,{color:"secondary",variant:"outlined",fullWidth:!0,onClick:e.onAddProperty},a.a.createElement(le.a,null)))}),ke=Object(S.b)(function(e){return Object(m.a)({},e.service)},function(e){return{onTextChanged:function(t){return e((n=t.target.name,r=t.target.value,{type:"SERVICE_FIELD_CHANGE",field:n,value:r}));var n,r},onSave:function(t,n){return e(function(e,t){var n={title:e,serviceProperties:t};return function(e){return new Promise(function(t){O.a.post("/Services",n).then(function(n){e(J()),t()})})}}(t,n))},onResetForm:function(){return e(X())},onUpdate:function(t,n,r){return e(function(e,t,n){var r={title:t,serviceProperties:n};return function(t){return new Promise(function(n){O.a.put("/Services/"+e,r).then(function(e){t(J()),t(X()),n()})})}}(t,n,r))}}})(function(e){return a.a.createElement(pe,{open:e.open},a.a.createElement(je,{steps:["Service Info","Service Properties"],onClose:e.onClose,onSave:null==e.selectedId?function(){return e.onSave(e.title,e.serviceProperties).then(function(){e.onClose(),e.onResetForm()})}:function(){return e.onUpdate(e.selectedId,e.title,e.serviceProperties).then(function(){e.onClose(),e.onResetForm()})}},a.a.createElement(f,{value:e.title,name:"title",autoFocus:!0,required:!0,fullWidth:!0,label:"Service Title",onChange:function(t){return e.onTextChanged(t)}}),a.a.createElement(Pe,null)))}),we=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={isAddDialogOpen:!1},n.editServiceHandler=function(){return n.props.getServiceInfo(n.props.selectedId).then(n.setState({isAddDialogOpen:!0}))},n.openAddDialog=function(){return n.setState({isAddDialogOpen:!0})},n.closeAddDialog=function(){return n.setState({isAddDialogOpen:!1})},n.onAddButtonClick=function(){n.props.resetForms(),n.openAddDialog()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getServices()}},{key:"render",value:function(){var e=this,t=null==this.props.services?null:a.a.createElement(ae,{services:this.props.services});return a.a.createElement(p.e,{container:!0},a.a.createElement(ke,{open:this.state.isAddDialogOpen,onClose:this.closeAddDialog}),a.a.createElement(p.e,{xs:12,item:!0,className:$.a.container},a.a.createElement(p.e,{container:!0,spacing:16},t)),a.a.createElement(me,null,a.a.createElement(de,{onClick:function(){return e.props.deleteService(e.props.selectedId)},visible:null!=this.props.selectedId,type:"delete",color:"secondary"}),a.a.createElement(de,{onClick:this.editServiceHandler,visible:null!=this.props.selectedId,type:"edit",color:"secondary"}),a.a.createElement(de,{onClick:this.onAddButtonClick,visible:!0,type:"add",color:"primary"})))}}]),t}(r.Component),xe=Object(S.b)(function(e){return Object(m.a)({},e.service)},function(e){return{getServices:function(){return e(J())},deleteService:function(t){return e(function(e){return function(t){return new Promise(function(n){O.a.delete("/Services/"+e).then(function(e){t(J()),t(X()),n()})})}}(t))},getServiceInfo:function(t){return e(Z(t))},resetForms:function(){return e(X())}}})(we),Le=n(86),Ae=n.n(Le),Te=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.onGetServiceDetails(this.props.match.params.id)}},{key:"render",value:function(){return a.a.createElement(p.i,{className:Ae.a.container},a.a.createElement(p.s,{variant:"h5",component:"h3"},this.props.title),this.props.match.params.id,a.a.createElement("div",{className:Ae.a.itemDetails},this.props.serviceProperties.map(function(e,t){return a.a.createElement(p.c,{avatar:a.a.createElement(p.a,null,t+1),label:"".concat(e.title," - ").concat(e.code),color:"secondary",className:Ae.a.chips})})))}}]),t}(r.Component),Ne=Object(S.b)(function(e){return Object(m.a)({},e.service)},function(e){return{onGetServiceDetails:function(t){return e(Z(t))}}})(Te),Ve=function(){return function(e){O.a.get("/users").then(function(t){e({type:"DEVICE_LOAD_DEVICES",devices:t.data})})}},Fe=function(e){return{type:"DEVICE_LOAD_DEVICE_INFO",deviceInfo:e}},He=function(){return{type:"DEVICE_CLEAR_FORMS"}},Me=n(51),Be=n.n(Me),Ue=Object(S.b)(function(e){return Object(m.a)({},e.device)},function(e){return{onSelectDevice:function(t){return e({type:"DEVICE_SELECT_DEVICE",id:t})}}})(function(e){return a.a.createElement(p.e,{xs:3,item:!0},a.a.createElement(p.i,{className:[Be.a.container,e.device.id===e.selectedId?Be.a.selectedDevice:Be.a.notSelectedDevice].join(" "),onClick:function(){return e.onSelectDevice(e.device.id)}},a.a.createElement("div",{className:Be.a.iconContainer},a.a.createElement(V.a,{style:{fontSize:50},color:"secondary"})),a.a.createElement("div",{className:Be.a.detailsContainer},a.a.createElement(p.s,{variant:"h5",component:"h3"},e.device.name),a.a.createElement(p.s,{variant:"h6"},e.device.family),a.a.createElement("span",null,e.device.username))))}),We=function(e){return a.a.createElement(E,null,0==e.devices.length?a.a.createElement(ee,null):e.devices.map(function(e){return a.a.createElement(Ue,{device:e,key:e.id})}))},qe=Object(S.b)(function(e){return Object(m.a)({},e.device)},function(e){return{onTextChanged:function(t){return e((n=t.target.name,r=t.target.value,{type:"DEVICE_FIELD_CHANGE",field:n,value:r}));var n,r}}})(function(e){return a.a.createElement("div",null,a.a.createElement(f,{onChange:function(t){return e.onTextChanged(t)},value:e.title,name:"title",required:!0,label:"Title",fullWidth:!0}),a.a.createElement(f,{onChange:function(t){return e.onTextChanged(t)},value:e.desc,name:"desc",required:!0,label:"Desc",fullWidth:!0}),a.a.createElement(f,{onChange:function(t){return e.onTextChanged(t)},value:e.username,name:"username",required:!0,label:"Username",fullWidth:!0}),a.a.createElement(f,{onChange:function(t){return e.onTextChanged(t)},value:e.password,name:"password",required:null==e.selectedId,label:"Password",fullWidth:!0,type:"password"}))}),Ge={container:{margin:10,padding:5,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},Ye=function(e){return a.a.createElement(p.i,{style:Ge.container},a.a.createElement("label",null,e.service.title),a.a.createElement(p.l,{color:"secondary",onChange:function(){return e.onChange(e.service.id)},checked:e.isSelected,value:e.service.id}))},ze={container:{margin:10},helper:{textAlign:"center",padding:5}},Je=Object(S.b)(function(e){return Object(m.a)({},e.service,e.device)},function(e){return{onSelectServiceChanged:function(t){return e(function(e){return{type:"DEVICE_ON_SELECT_SERVICE",id:e}}(t))}}})(function(e){return a.a.createElement("div",{style:ze.container},a.a.createElement("div",{style:ze.helper},a.a.createElement("span",null,"Select this device accessible services.")),null==e.services?null:e.services.map(function(t){return a.a.createElement(Ye,{onChange:e.onSelectServiceChanged,isSelected:-1!=e.selectedServices.indexOf(t.id),service:t,key:t.id})}))}),Ze=Object(S.b)(function(e){return Object(m.a)({},e.device)},function(e){return{onSave:function(t){return e(function(e){var t={name:e.title,family:e.desc,username:e.username,password:e.password,serviceUsers:e.selectedServices.map(function(e){return{serviceId:e}})};return function(e){return new Promise(function(n){O.a.post("/users",t).then(function(t){e(Ve()),n()})})}}(t))},onResetForm:function(){return e(He())},onUpdate:function(t,n){return e(function(e,t){var n={name:t.title,family:t.desc,username:t.username,password:t.password,serviceUsers:t.selectedServices.map(function(e){return{serviceId:e}})};return function(t){return new Promise(function(r){O.a.put("/Users/"+e,n).then(function(e){t(Ve()),t(He()),r()})})}}(t,n))}}})(function(e){return a.a.createElement(pe,{open:e.open},a.a.createElement(je,{steps:["Device Info","Service Accessibility"],onClose:e.onClose,onSave:null==e.selectedId?function(){return e.onSave(Object(m.a)({},e)).then(function(){e.onClose(),e.onResetForm()})}:function(){return e.onUpdate(e.selectedId,Object(m.a)({},e)).then(function(){e.onClose(),e.onResetForm()})}},a.a.createElement(qe,null),a.a.createElement(Je,null)))}),Ke=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={isAddDialogOpen:!1},n.editDeviceHandler=function(){return n.props.getDeviceInfo(n.props.selectedId).then(n.openAddDialog())},n.openAddDialog=function(){return n.setState({isAddDialogOpen:!0})},n.closeAddDialog=function(){return n.setState({isAddDialogOpen:!1})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadDevices(),this.props.loadServices()}},{key:"render",value:function(){var e=this,t=null==this.props.devices?null:a.a.createElement(We,{devices:this.props.devices});return a.a.createElement(p.e,{container:!0},a.a.createElement(Ze,{open:this.state.isAddDialogOpen,onClose:this.closeAddDialog}),a.a.createElement(p.e,{xs:12,item:!0,style:{padding:20,height:"80%"}},a.a.createElement(p.e,{container:!0,spacing:16},t)),a.a.createElement(me,null,a.a.createElement(de,{onClick:function(){return e.props.deleteDevice(e.props.selectedId)},visible:null!=this.props.selectedId,type:"delete",color:"secondary"}),a.a.createElement(de,{onClick:this.editDeviceHandler,visible:null!=this.props.selectedId,type:"edit",color:"secondary"}),a.a.createElement(de,{onClick:this.openAddDialog,visible:!0,type:"add",color:"primary"})))}}]),t}(r.Component),Xe=Object(S.b)(function(e){return Object(m.a)({},e.device)},function(e){return{loadDevices:function(){return e(Ve())},loadServices:function(){return e(J())},deleteDevice:function(t){return e((n=t,function(e){return new Promise(function(t){O.a.delete("/users/"+n).then(function(n){e(Ve()),e(He()),t()})})}));var n},getDeviceInfo:function(t){return e((n=t,function(e){return new Promise(function(t){O.a.get("/users/"+n).then(function(n){e(Fe(n.data)),t()})})}));var n}}})(Ke),Qe=n(81),$e=n.n(Qe),et=Object(S.b)(function(e){return Object(m.a)({},e.service)})(function(e){return a.a.createElement(p.j,{fullWidth:!0,value:e.selectedValue,onChange:function(t){return e.onChange(t.target.value)}},e.services.map(function(e){return a.a.createElement(p.g,{key:e.id,value:e.id},e.title)}))}),tt={container:{textAlign:"center",margin:5},buttonsRow:{textAlign:"right"}},nt=function(e){return a.a.createElement(pe,{open:e.open},a.a.createElement(p.d,{fullWidth:!0},a.a.createElement("div",{style:tt.container},a.a.createElement(p.s,{color:"secondary",variant:"h6"},e.title)),a.a.createElement("br",null),a.a.createElement("span",null,"Select Service:"),a.a.createElement(et,{selectedValue:e.selectedService,onChange:e.onSelectedServiceChanged}),a.a.createElement("br",null),a.a.createElement(p.r,{onChange:function(t){return e.onTextChanged(t)},name:"from",label:"Select Start Date",type:"datetime-local",value:e.getPropsHandler("from")}),a.a.createElement("br",null),a.a.createElement(p.r,{onChange:function(t){return e.onTextChanged(t)},name:"to",label:"Select End Date",type:"datetime-local",value:e.getPropsHandler("to")}),a.a.createElement("br",null),a.a.createElement("div",{style:tt.buttonsRow},a.a.createElement(p.b,{onClick:e.onClose,color:"primary"}," Close"),a.a.createElement(p.b,{onClick:e.onFinish,variant:"contained",color:"primary"}," Finish"))))},rt=Object(S.b)(function(e){return Object(m.a)({},e.report)},function(e){return{setSelectedReport:function(t){return e({type:"REPORT_SET_SELECTED_REPORT",selectedReport:t})},setSelectedServiceHandler:function(t){return e({type:"REPORT_SET_SELECTED_SERVICE",selectedService:t})},onTextChangedHandler:function(t){return e((n=t.target.name,r=t.target.value,{type:"REPORT_FIELD_CHANGE",field:n,value:r}));var n,r}}})(function(e){var t=e.name,n={padding:10,backgroundColor:e.color,minHeight:150,cursor:e.disable?"cursor":"pointer",justifyContent:"center",alignItems:"center",flex:1,display:"flex",color:"#ffffff",flexDirection:"column"};return a.a.createElement(E,null,a.a.createElement(p.i,{style:n,onClick:e.disable?null:function(){return e.setSelectedReport(t)}},a.a.createElement(p.s,{color:"inherit",variant:"h4"},e.title),e.disable?a.a.createElement("span",null,"(disabled)"):null),a.a.createElement(nt,{title:e.title,open:e.selectedReport==t,selectedService:e.selectedService,onSelectedServiceChanged:e.setSelectedServiceHandler,onClose:function(){return e.setSelectedReport("")},onTextChanged:e.onTextChangedHandler,onFinish:function(){return e.setSelectedReport(""),void e.onFinish()},getPropsHandler:function(t){return e[t]}}))}),at=n(177),ct=n.n(at),it=Object(z.a)(Object(S.b)(function(e){return Object(m.a)({},e.report)},function(e){return{onSetResult:function(t,n){return e(function(e,t){return{type:"REPORT_SET_RESULT",rows:e,columns:t}}(t,n))},getServiceInfo:function(t){return e(Z(t))}}})(function(e){console.log("simpleReport",e);var t=function(){return new Promise(function(t){e.getServiceInfo(e.selectedService).then(function(e){return t(e)})})};return a.a.createElement(E,null,a.a.createElement(rt,{onFinish:function(){var n,r;Promise.all([(n=e.selectedService,r="from=".concat(e.from,"&to=").concat(e.to),new Promise(function(e){O.a.get("/Data/".concat(n,"?").concat(r)).then(function(t){e(t.data)})})),t()]).then(function(t){var n=[],r=Object(fe.a)(t[1].serviceProperties);t[0].map(function(e,t){var a=[t+1,e.logDate,e.registerDate],c=Object(fe.a)(r).map(function(t){var n=e.serviceData.find(function(e){return e.serviceProperty.id===t.id});return void 0==n?"--":n.data});n.push(a.concat(c))}),e.onSetResult(n,["#","Log Date","Register Date"].concat(Object(fe.a)(r.map(function(e){return e.title})))),e.history.push("ReportResult/".concat(e.selectedService))})},title:"Simple Report",color:"#00e5ff",name:"SIMPLE_REPORT"}))})),ot=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadServices()}},{key:"render",value:function(){return a.a.createElement("div",{className:ct.a.container},a.a.createElement(p.e,{container:!0,spacing:32},a.a.createElement(p.e,{item:!0,xs:3},a.a.createElement(it,{title:"Simple Report",color:"#00e5ff",name:"SIMPLE_REPORT"})),a.a.createElement(p.e,{item:!0,xs:3},a.a.createElement(rt,{disable:!0,title:"Log Report",color:"#ff3d00",name:"LOG_REPORT"}))))}}]),t}(r.Component),lt=Object(S.b)(function(e){return Object(m.a)({},e.report)},function(e){return{loadServices:function(){return e(J())}}})(ot),st=Object(S.b)(function(e){return Object(m.a)({},e.report)})(function(e){e.match.params.serviceId;return a.a.createElement("div",{style:{padding:20}},a.a.createElement(p.i,null,a.a.createElement(p.m,null,a.a.createElement(p.p,null,a.a.createElement(p.q,null,e.columns.map(function(e,t){return a.a.createElement(p.o,{key:t},e)}))),a.a.createElement(p.n,null,e.rows.map(function(e,t){return a.a.createElement(p.q,{key:t},e.map(function(e,t){return a.a.createElement(p.o,{key:t}," ",e)}))})))))}),ut=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){null!=localStorage.getItem("token")&&this.props.checkTokenHandler(localStorage.getItem("token"))}},{key:"render",value:function(){var e=this.props.isAuthenticated?a.a.createElement(G.a,null,a.a.createElement(Y.a,{path:"/Details/:id",component:Ne}),a.a.createElement(Y.a,{path:"/Devices",component:Xe}),a.a.createElement(Y.a,{path:"/ReportResult/:serviceId",component:st}),a.a.createElement(Y.a,{path:"/Reports",component:lt}),a.a.createElement(Y.a,{path:"/",component:xe})):a.a.createElement(G.a,null,a.a.createElement(Y.a,{path:"/",component:j}));return a.a.createElement(q,null,e)}}]),t}(r.Component),dt=Object(z.a)(Object(S.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},function(e){return{checkTokenHandler:function(t){return e(function(e){return function(t){var n=O.a.create();n.defaults.headers.common.authorization="Bearer ".concat(e),n.get("users/Refresh").then(function(e){t(C(e.data.token))})}}(t))}}})(ut));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var mt=n(431),pt=n(49),ft={isAuthenticated:!1,token:null,username:"",password:"",rePassword:"",name:"",family:""},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(m.a)({},e,{isAuthenticated:!0,token:t.token});case"AUTH_FILED_CHANGE":return Object(m.a)({},e,Object(Ie.a)({},t.filed,t.value));case"LOGOUT":return Object(m.a)({},ft);default:return e}},vt={services:null,title:"",serviceProperties:[{id:null,title:"",code:""}],selectedId:null},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SERVICE_FIELD_CHANGE":return Object(m.a)({},e,Object(Ie.a)({},t.field,t.value));case"SERVICE_LOAD_SERVICE":return Object(m.a)({},e,{services:t.services});case"SERVICE_ADD_NEW_PROPERTIES":return Object(m.a)({},e,{serviceProperties:Object(fe.a)(e.serviceProperties).concat({id:null,title:"",code:""})});case"SERVICE_DELETE_NEW_PROPERTIES":return Object(m.a)({},e,{serviceProperties:Object(fe.a)(e.serviceProperties).filter(function(e,n){return n!=t.index})});case"SERVICE_PROPERTY_TITLE_CHANGED":var n=Object(fe.a)(e.serviceProperties);return n.splice(t.index,1,{id:n[t.index].id,title:t.value,code:n[t.index].code}),Object(m.a)({},e,{serviceProperties:n});case"SERVICE_PROPERTY_CODE_CHANGED":var r=Object(fe.a)(e.serviceProperties);return r.splice(t.index,1,{id:r[t.index].id,code:t.value,title:r[t.index].title}),Object(m.a)({},e,{serviceProperties:r});case"SERVICE_CLEAR_FORMS":return Object(m.a)({},vt,{services:e.services});case"SERVICE_SELECT_SERVICE":return Object(m.a)({},e,{selectedId:t.id==e.selectedId?null:t.id});case"SERVICE_LOAD_SERVICE_INFO":var a=t.serviceInfo;return Object(m.a)({},e,{title:a.title,serviceProperties:a.serviceProperties});default:return e}},_t={devices:null,selectedId:null,title:"",desc:"",username:"",password:"",selectedServices:[]},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DEVICE_FIELD_CHANGE":return Object(m.a)({},e,Object(Ie.a)({},t.field,t.value));case"DEVICE_LOAD_DEVICES":return Object(m.a)({},e,{devices:t.devices});case"DEVICE_SELECT_DEVICE":return Object(m.a)({},e,{selectedId:e.selectedId==t.id?null:t.id});case"DEVICE_ON_SELECT_SERVICE":var n=t.id,r=-1!=e.selectedServices.indexOf(n);return Object(m.a)({},e,{selectedServices:r?e.selectedServices.filter(function(e){return e!=n}):e.selectedServices.concat(n)});case"DEVICE_CLEAR_FORMS":return Object(m.a)({},_t,{devices:e.devices});case"DEVICE_LOAD_DEVICE_INFO":var a=t.deviceInfo;return Object(m.a)({},e,{title:a.name,desc:a.family,username:a.username,selectedServices:a.serviceUsers.map(function(e){return e.serviceId})});default:return e}},St={selectedReport:"",selectedService:"",from:$e()().add(-1,"days").format("YYYY-MM-DDT00:00"),to:$e()().format("YYYY-MM-DDT23:59"),rows:[],columns:[]},gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REPORT_FIELD_CHANGE":return Object(m.a)({},e,Object(Ie.a)({},t.field,t.value));case"REPORT_SET_SELECTED_REPORT":return Object(m.a)({},e,{selectedReport:t.selectedReport});case"REPORT_SET_SELECTED_SERVICE":return Object(m.a)({},e,{selectedService:t.selectedService});case"REPORT_SET_RESULT":return Object(m.a)({},e,{rows:t.rows,columns:t.columns});default:return e}},Ot=n(179),Ct=n(30),yt=n(180),jt=n.n(yt),It=Object(pt.c)({auth:Et,service:ht,device:bt,report:gt}),Rt=Object(pt.d)(It,Object(pt.a)(Ot.a)),Dt=Object(Ct.createMuiTheme)({palette:{primary:jt.a}});O.a.defaults.baseURL="http://localhost:33213/api/",i.a.render(a.a.createElement(S.a,{store:Rt},a.a.createElement(mt.a,null,a.a.createElement(Ct.MuiThemeProvider,{theme:Dt},a.a.createElement(dt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},50:function(e,t,n){e.exports={container:"ServiceProperties__container___18vJ3",propertiesContainer:"ServiceProperties__propertiesContainer___1UxNg",textField:"ServiceProperties__textField___1xReR",clearButton:"ServiceProperties__clearButton___2ja3A"}},51:function(e,t,n){e.exports={container:"DeviceInfo__container___2lvJD",iconContainer:"DeviceInfo__iconContainer___2aqsj",detailsContainer:"DeviceInfo__detailsContainer___3gAy0",selectedDevice:"DeviceInfo__selectedDevice___3vDJE",notSelectedDevice:"DeviceInfo__notSelectedDevice___15S6f"}},56:function(e,t,n){e.exports={container:"MenuBar__container___3Ku8t",selectedLinks:"MenuBar__selectedLinks___PLiE8",rightLinks:"MenuBar__rightLinks___1bFoP"}},77:function(e,t,n){e.exports=n.p+"static/media/bitbird.b83e038b.png"},85:function(e,t,n){e.exports={buttonsRow:"Stepper__buttonsRow___2YVqK",navigationButtons:"Stepper__navigationButtons___h_TJL",closeButton:"Stepper__closeButton___y_FzB"}},86:function(e,t,n){e.exports={container:"ServiceDetails__container___W0Z-9",itemDetails:"ServiceDetails__itemDetails___3Lg2R",chips:"ServiceDetails__chips___1Wvh0"}}},[[235,2,1]]]);
//# sourceMappingURL=main.de159a56.chunk.js.map